---
title: 'How to Measure the Current of ESP32 Thread Devices'
description: "Tutorial on how to properly measure the enery consumption of ESP32 devices running OpenThread."
date: 2024-06-5
draft: false
---

import Callout from "@/components/Callout.astro";

---

The energy consumption of a device is especially important when those devices are Internet of Things (IoT) devices. ESP32 Thread devices that function as Sleepy End Devices (SEDs) or Synchronized Sleepy End Devices (SSEDs) are no exception.

However, you cannot just simply measure the current of an ESP32 device by simply connecting it to an oscilloscope, Nordic Power Profiler Kit II, Joulescope, or your measurement device of choice. If you are not careful, you may even risk damaging the device.

To the best of my knowledge, there are not many resources that explain how to properly measure the current of ESP32 microcontrollers. 

In this guide, I would like to share what I learned in the process of measuring the energy usage of my own ESP32 devices, references to resources that I found helpful, and common pitfalls to avoid.

<Callout type="info">
  In this tutorial, I will be using specifically be using an [ESP32-H2 devkit](https://espressif-docs.readthedocs-hosted.com/projects/esp-dev-kits/en/latest/esp32h2/esp32-h2-devkitm-1/user_guide.html). Although I never measured the current of other devices beyond the ESP32-H2, I believe the steps in this tutorial should still apply to other ESP32 devkits that contain a [J5 Header](https://docs.espressif.com/projects/esp-dev-kits/en/latest/esp32h2/esp32-h2-devkitm-1/user_guide.html#current-measurement) (such as an [ESP32-C6](https://espressif-docs.readthedocs-hosted.com/projects/esp-dev-kits/en/latest/esp32c6/esp32-c6-devkitc-1/user_guide.html)). 
</Callout>

## Choosing the Right Measurement Kit

You can measure the current of an ESP32 device using an oscilloscope. However, doing so can be challenging, since oscilloscopes measure *voltage*, not current. Using an oscilloscope requires the *indirect* measurement of current by measuring the voltage drop.
